<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ứng dụng Ôn tập Trắc nghiệm Đa môn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa; /* Light neutral background */
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        .nav-link.active {
            background-color: #4f46e5; /* Indigo accent */
            color: white;
            font-weight: 600;
        }
        .sub-nav-link {
            transition: all 0.3s ease;
        }
        .sub-nav-link.active {
            background-color: #c7d2fe; /* Indigo-200 accent for sub-nav */
            color: #4f46e5;
            font-weight: 600;
        }
        .option-btn {
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }
        .option-btn.selected {
            border-color: #4f46e5;
            background-color: #e0e7ff;
        }
        .option-btn.correct {
            background-color: #dcfce7; /* Green for correct */
            border-color: #22c55e;
        }
        .option-btn.incorrect {
            background-color: #fee2e2; /* Red for incorrect */
            border-color: #ef4444;
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 300px;
            width: 100%;
            max-width: 300px;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar -->
        <aside class="w-full md:w-64 bg-white shadow-lg shrink-0">
            <div class="p-6 sticky top-0">
                <h1 class="text-2xl font-bold text-indigo-700">Ôn tập Đa môn</h1>
                <p class="text-sm text-gray-500 mt-1">Chương trình Phổ thông Cao đẳng</p>
                <nav class="mt-8">
                    <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Môn Học</h2>
                    <div class="mt-2 space-y-2">
                        <a href="#" id="nav-toan" class="nav-link flex items-center px-4 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                            Toán
                        </a>
                        <a href="#" id="nav-van" class="nav-link flex items-center px-4 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100">
                           <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v11.494M12 6.253c-1.332 0-2.623-.21-3.835-.619a4.874 4.874 0 01-1.255-.939M12 6.253c1.332 0 2.623-.21 3.835-.619a4.874 4.874 0 001.255-.939M12 21.747c-1.332 0-2.623.21-3.835.619a4.874 4.874 0 00-1.255.939M12 21.747c1.332 0 2.623.21 3.835.619a4.874 4.874 0 011.255.939M2 12h20"></path></svg>
                            Ngữ Văn
                        </a>
                        <div id="sub-nav-van" class="ml-6 mt-1 space-y-1 hidden"></div>
                        <a href="#" id="nav-ly" class="nav-link flex items-center px-4 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12a.75.75 0 01.75-.75h14.25a.75.75 0 010 1.5H4.5a.75.75 0 01-.75-.75z" /><path stroke-linecap="round" stroke-linejoin="round" d="M12 3.75a8.25 8.25 0 018.25 8.25H3.75A8.25 8.25 0 0112 3.75zM12 20.25a8.25 8.25 0 008.25-8.25H3.75a8.25 8.25 0 008.25 8.25z" /></svg>
                            Vật Lý
                        </a>
                        <div id="sub-nav-ly" class="ml-6 mt-1 space-y-1 hidden"></div>
                        <a href="#" id="nav-su" class="nav-link flex items-center px-4 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v11.494M12 6.253c-1.332 0-2.623-.21-3.835-.619a4.874 4.874 0 01-1.255-.939M12 6.253c1.332 0 2.623-.21 3.835-.619a4.874 4.874 0 001.255-.939M12 21.747c-1.332 0-2.623.21-3.835.619a4.874 4.874 0 00-1.255.939M12 21.747c1.332 0 2.623.21 3.835.619a4.874 4.874 0 011.255.939M2 12h20"></path></svg>
                            Lịch Sử
                        </a>
                        <div id="sub-nav-su" class="ml-6 mt-1 space-y-1 hidden"></div>
                        <a href="#" id="nav-xa-hoi" class="nav-link flex items-center px-4 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h2a2 2 0 002-2V7a2 2 0 00-2-2h-2V3a1 1 0 00-1-1H6a1 1 0 00-1 1v2H3a2 2 0 00-2 2v11a2 2 0 002 2h2v1a1 1 0 001 1h11a1 1 0 001-1v-1zm-4-4H9m6-10H9m6 4H9m-3 8h6"></path></svg>
                            Xã Hội
                        </a>
                         <a href="#" id="nav-formulas" class="nav-link flex items-center px-4 py-2.5 rounded-lg text-gray-700 hover:bg-gray-100">
                             <svg class="w-5 h-5 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18.375a3.75 3.75 0 00.163-7.493l.024-.005.024-.005-.005-.024a3.75 3.75 0 00-7.494-.163" /><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 5.25a3.75 3.75 0 00-7.493.163l-.005.024-.005.024.024-.005A3.75 3.75 0 0012 10.875" /></svg>
                            Công thức (Toán & Lý)
                        </a>
                    </div>

                    <div id="filter-section" class="mt-8 hidden">
                        <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Mức độ</h2>
                        <div class="mt-2 grid grid-cols-2 gap-2" id="level-filters">
                             <button data-level="all" class="level-filter-btn col-span-2 px-3 py-1.5 text-sm font-medium rounded-md bg-indigo-100 text-indigo-700">Tất cả</button>
                             <button data-level="1" class="level-filter-btn px-3 py-1.5 text-sm font-medium rounded-md bg-gray-200 text-gray-600">Mức 1</button>
                             <button data-level="2" class="level-filter-btn px-3 py-1.5 text-sm font-medium rounded-md bg-gray-200 text-gray-600">Mức 2</button>
                             <button data-level="3" class="level-filter-btn px-3 py-1.5 text-sm font-medium rounded-md bg-gray-200 text-gray-600">Mức 3</button>
                        </div>
                    </div>
                    
                    <div class="mt-8">
                         <button id="reset-btn" class="w-full bg-red-500 text-white font-semibold py-2 rounded-lg hover:bg-red-600 transition duration-300">Làm lại</button>
                    </div>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 p-4 sm:p-6 lg:p-8">
            <div id="welcome-view">
                 <div class="bg-white p-8 rounded-xl shadow-md text-center">
                    <h2 class="text-3xl font-bold text-gray-800">Chào mừng đến với Ứng dụng Ôn tập Đa môn</h2>
                    <p class="mt-4 text-lg text-gray-600">Chọn một môn học bên trái để bắt đầu ôn tập. <br>Thử sức với các câu hỏi và kiểm tra kiến thức của bạn!</p>
                    <div class="mt-6">
                        <svg class="mx-auto h-24 w-24 text-indigo-500"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="1"  stroke-linecap="round"  stroke-linejoin="round">  <path d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" /></svg>
                    </div>
                 </div>
            </div>

            <div id="quiz-view" class="hidden">
                <div id="summary-view" class="mb-6 bg-white p-6 rounded-xl shadow-md">
                    <div class="grid md:grid-cols-3 gap-6 items-center">
                        <div class="md:col-span-1">
                             <div class="chart-container">
                                <canvas id="progressChart"></canvas>
                            </div>
                        </div>
                        <div class="md:col-span-2 text-center md:text-left">
                            <h2 id="topic-title" class="text-2xl font-bold text-gray-800">Chọn chủ đề</h2>
                            <p id="progress-text" class="mt-2 text-lg text-gray-600">Bạn đã trả lời đúng <span id="correct-count" class="font-bold text-green-600">0</span> trên <span id="total-answered" class="font-bold text-indigo-600">0</span> câu.</p>
                             <p id="motivational-text" class="mt-2 text-gray-500 italic">Hãy tiếp tục cố gắng!</p>
                        </div>
                    </div>
                </div>
                <div id="question-list" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                </div>
            </div>

             <div id="formulas-view" class="hidden bg-white p-8 rounded-xl shadow-md">
                <h2 class="text-3xl font-bold mb-6 border-b pb-4 text-indigo-700" id="formulas-view-title">Công thức trọng tâm (Toán & Lý)</h2>
                <div id="formulas-content" class="prose max-w-none prose-indigo">
                </div>
            </div>
        </main>
    </div>

    <script>
        const quizData = {
            "toan": {
                name: "Toán học 12",
                subtopics: {
                    "ham-so": "Hàm số và đồ thị",
                    "mu-logarit": "Mũ và Logarit",
                    "nguyen-ham-tich-phan": "Nguyên hàm - Tích phân",
                    "so-phuc": "Số phức",
                    "hinh-hoc-oz": "Hình học Oxyz"
                },
                questions: {
                    "ham-so": [
                        { id: 't_hs_1', level: 1, question: 'Hàm số $y = x^3 - 3x + 1$ đồng biến trên khoảng nào?', options: ['A. $(-\\infty; -1)$', 'B. $(-1; 1)$', 'C. $(1; +\\infty)$', 'D. A và C đúng'], answer: 'D', solution: '$y\' = 3x^2 - 3$. $y\' > 0 \\iff x < -1$ hoặc $x > 1$.' },
                        { id: 't_hs_2', level: 1, question: 'Tìm giá trị cực đại của hàm số $y = -x^4 + 2x^2 + 2$.', options: ['A. 3', 'B. 2', 'C. 1', 'D. 0'], answer: 'A', solution: '$y\' = -4x^3 + 4x = 0 \\iff x=0, x=\\pm 1$. Tại $x=\\pm 1$, hàm số đạt cực đại $y_{CĐ} = 3$.' },
                        { id: 't_hs_3', level: 2, question: 'Đồ thị hàm số $y = \\frac{2x-1}{x+1}$ có tiệm cận đứng là đường thẳng nào?', options: ['A. $x = 2$', 'B. $x = 1$', 'C. $x = -1$', 'D. $y = 2$'], answer: 'C', solution: 'Tiệm cận đứng là nghiệm của mẫu số: $x+1=0 \\iff x=-1$.' },
                        { id: 't_hs_4', level: 2, question: 'Tìm giá trị lớn nhất của hàm số $y = x + \\sqrt{4-x^2}$.', options: ['A. 2', 'B. $2\\sqrt{2}$', 'C. 4', 'D. -2'], answer: 'B', solution: 'Hàm số xác định trên $[-2, 2]$. Tính $y\'$ và xét dấu, so sánh giá trị tại các điểm cực trị và hai biên.' },
                        { id: 't_hs_5', level: 3, question: 'Tìm tất cả giá trị của $m$ để hàm số $y = \\frac{1}{3}x^3 - mx^2 + (m^2-m+1)x + 1$ đạt cực đại tại $x=1$.', options: ['A. $m=2$', 'B. $m=1$', 'C. $m=-1$', 'D. $m=0$'], answer: 'A', solution: 'Tính $y\'$ và $y\'\'$. Cho $y\'(1)=0$ và $y\'\'(1)<0$ để giải tìm $m$.' },
                    ],
                    "mu-logarit": [
                        { id: 't_ml_1', level: 1, question: 'Giải phương trình $2^{x+1} = 16$.', options: ['A. $x=3$', 'B. $x=4$', 'C. $x=7$', 'D. $x=8$'], answer: 'A', solution: '$2^{x+1} = 2^4 \\iff x+1=4 \\iff x=3$.' },
                        { id: 't_ml_2', level: 1, question: 'Tập nghiệm của phương trình $\\log_2(x-1) = 3$ là:', options: ['A. $\{9\}$', 'B. $\{7\}$', 'C. $\{8\}$', 'D. $\{10\}$'], answer: 'A', solution: 'Điều kiện: $x-1>0 \\iff x>1$. Phương trình tương đương $x-1 = 2^3 = 8 \\iff x=9$.' },
                        { id: 't_ml_3', level: 2, question: 'Tính đạo hàm của hàm số $y = \\log_3(x^2+1)$.', options: ['A. $\\frac{2x}{x^2+1}$', 'B. $\\frac{1}{(x^2+1)\\ln 3}$', 'C. $\\frac{2x}{(x^2+1)\\ln 3}$', 'D. $\\frac{2x\\ln 3}{x^2+1}$'], answer: 'C', solution: 'Áp dụng công thức $(\\log_a u)\' = \\frac{u\'}{u \\ln a}$.' },
                        { id: 't_ml_4', level: 2, question: 'Giải bất phương trình $9^x - 4 \\cdot 3^x + 3 > 0$.', options: ['A. $x<0$ hoặc $x>1$', 'B. $0<x<1$', 'C. $x>1$', 'D. $x<0$'], answer: 'A', solution: 'Đặt $t = 3^x > 0$. Bất phương trình trở thành $t^2 - 4t + 3 > 0 \\iff t<1$ hoặc $t>3$. Suy ra $3^x < 1$ hoặc $3^x > 3$, tức là $x<0$ hoặc $x>1$.' },
                        { id: 't_ml_5', level: 3, question: 'Cho $a = \\log_2 3$ và $b = \\log_2 5$. Tính $\\log_2 60$ theo $a$ và $b$.', options: ['A. $2+a+b$', 'B. $1+2a+b$', 'C. $2+a-b$', 'D. $4+a+b$'], answer: 'A', solution: '$\\log_2 60 = \\log_2(4 \\cdot 3 \\cdot 5) = \\log_2 4 + \\log_2 3 + \\log_2 5 = 2+a+b$.' },
                    ],
                    "nguyen-ham-tich-phan": [
                        { id: 't_nhtp_1', level: 1, question: 'Tìm nguyên hàm của hàm số $f(x) = x^3 - 3x^2 + \\frac{1}{x}$.', options: ['A. $\\frac{x^4}{4} - x^3 + \\ln|x| + C$', 'B. $3x^2 - 6x - \\frac{1}{x^2} + C$', 'C. $\\frac{x^4}{4} - x^3 - \\ln|x| + C$', 'D. $\\frac{x^4}{3} - x^3 + \\ln|x| + C$'], answer: 'A', solution: 'Áp dụng công thức nguyên hàm cơ bản.' },
                        { id: 't_nhtp_2', level: 1, question: 'Hàm số $F(x) = e^{x^2}$ là một nguyên hàm của hàm số nào?', options: ['A. $f(x) = 2x \\cdot e^{x^2}$', 'B. $f(x) = e^{2x}$', 'C. $f(x) = e^{x^2} \\cdot x^2$', 'D. $f(x) = x \\cdot e^{x^2}$'], answer: 'A', solution: 'Tính đạo hàm của $F(x)$: $F\'(x) = (e^{x^2})\' = e^{x^2} \\cdot (x^2)\' = 2x e^{x^2}$.' },
                        { id: 't_nhtp_3', level: 2, question: 'Biết $F(x)$ là một nguyên hàm của $f(x) = \\frac{1}{x-1}$ và $F(2) = 1$. Tính $F(3)$.', options: ['A. $F(3) = \\ln(2) - 1$', 'B. $F(3) = \\ln(2) + 1$', 'C. $F(3) = \\ln(2)$', 'D. $F(3) = \\frac{1}{2}$'], answer: 'B', solution: '$F(x) = \\ln|x-1| + C$. $F(2)=1 \\Rightarrow \\ln|1| + C = 1 \\Rightarrow C = 1$. Vậy $F(3) = \\ln|2| + 1 = \\ln(2)+1$.' },
                        { id: 't_nhtp_4', level: 2, question: 'Tính tích phân $I = \\int_{0}^{1} (2x+1)e^x dx$.', options: ['A. $e+1$', 'B. $2e$', 'C. $3e-1$', 'D. $e$'], answer: 'A', solution: 'Tích phân từng phần, $I = [(2x-1)e^x]_{0}^{1} = e - (-1) = e+1$.' },
                        { id: 't_nhtp_5', level: 3, question: 'Tính thể tích khối tròn xoay tạo thành khi quay hình phẳng giới hạn bởi các đường $y = \\sqrt{x}$, $y=0$ và $x=4$ quanh trục Ox.', options: ['A. $16\\pi$', 'B. $8\\pi$', 'C. $4\\pi$', 'D. $2\\pi$'], answer: 'B', solution: '$V = \\pi \\int_0^4 (\\sqrt{x})^2 dx = \\pi \\int_0^4 x dx = \\pi [\\frac{x^2}{2}]_0^4 = 8\\pi$.' }
                    ],
                    "so-phuc": [
                        { id: 't_sp_1', level: 1, question: 'Số phức liên hợp của số phức $z = 3 - 4i$ là:', options: ['A. $-3 + 4i$', 'B. $3 + 4i$', 'C. $-3 - 4i$', 'D. $4 - 3i$'], answer: 'B', solution: 'Số phức liên hợp của $z=a+bi$ là $\\bar{z} = a-bi$.' },
                        { id: 't_sp_2', level: 1, question: 'Tìm phần thực và phần ảo của số phức $z = (2+3i) + (1-i)$.', options: ['A. Phần thực là 3, phần ảo là 2', 'B. Phần thực là 3, phần ảo là $2i$', 'C. Phần thực là 2, phần ảo là 3', 'D. Phần thực là 1, phần ảo là 2'], answer: 'A', solution: '$z = (2+1) + (3-1)i = 3 + 2i$.' },
                        { id: 't_sp_3', level: 2, question: 'Tìm môđun của số phức $z = (1+i)(2-i)$.', options: ['A. $\\sqrt{10}$', 'B. $10$', 'C. $\\sqrt{5}$', 'D. $5$'], answer: 'A', solution: '$z = 2-i+2i-i^2 = 2+i+1 = 3+i$. $|z| = \\sqrt{3^2+1^2} = \\sqrt{10}$.' },
                        { id: 't_sp_4', level: 2, question: 'Điểm biểu diễn của số phức $z=2-5i$ trong mặt phẳng phức có tọa độ là:', options: ['A. $(2, 5)$', 'B. $(-2, 5)$', 'C. $(2, -5)$', 'D. $(5, 2)$'], answer: 'C', solution: 'Số phức $z=a+bi$ được biểu diễn bởi điểm $M(a,b)$.' },
                        { id: 't_sp_5', level: 3, question: 'Tìm nghịch đảo của số phức $z=1-2i$.', options: ['A. $\\frac{1}{5} + \\frac{2}{5}i$', 'B. $1+2i$', 'C. $\\frac{1}{3} - \\frac{2}{3}i$', 'D. $\\frac{1}{5} - \\frac{2}{5}i$'], answer: 'A', solution: '$\\frac{1}{z} = \\frac{1}{1-2i} = \\frac{1+2i}{(1-2i)(1+2i)} = \\frac{1+2i}{1-4i^2} = \\frac{1+2i}{5} = \\frac{1}{5} + \\frac{2}{5}i$.' }
                    ],
                    "hinh-hoc-oz": [
                        { id: 't_hhoz_1', level: 1, question: 'Trong không gian Oxyz, cho điểm $A(1; 2; 3)$ và $B(3; 0; -1)$. Tọa độ trung điểm $I$ của đoạn thẳng $AB$ là:', options: ['A. $I(2; 1; 1)$', 'B. $I(4; 2; 2)$', 'C. $I(-2; -2; -4)$', 'D. $I(2; 1; 2)$'], answer: 'A', solution: 'Tọa độ trung điểm được tính bằng trung bình cộng tọa độ các điểm đầu mút.' },
                        { id: 't_hhoz_2', level: 1, question: 'Trong không gian Oxyz, phương trình mặt cầu có tâm $I(-1; 2; -3)$ và bán kính $R = 3$ là:', options: ['A. $(x-1)^2 + (y+2)^2 + (z-3)^2 = 9$', 'B. $(x+1)^2 + (y-2)^2 + (z+3)^2 = 3$', 'C. $(x+1)^2 + (y-2)^2 + (z+3)^2 = 9$', 'D. $(x+1)^2 + (y-2)^2 + (z-3)^2 = 9$'], answer: 'C', solution: 'Phương trình mặt cầu có dạng $(x-a)^2 + (y-b)^2 + (z-c)^2 = R^2$.' },
                        { id: 't_hhoz_3', level: 2, question: 'Trong Oxyz, mặt phẳng $(P): 2x - y + 3z - 1 = 0$ có một vectơ pháp tuyến là:', options: ['A. $\\vec{n} = (2; 1; 3)$', 'B. $\\vec{n} = (2; -1; 3)$', 'C. $\\vec{n} = (2; 3; -1)$', 'D. $\\vec{n} = (-1; 3; 2)$'], answer: 'B', solution: 'Vectơ pháp tuyến của mặt phẳng $Ax+By+Cz+D=0$ là $\\vec{n}=(A,B,C)$.' },
                        { id: 't_hhoz_4', level: 2, question: 'Trong Oxyz, viết phương trình mặt phẳng đi qua $M(1;1;-1)$ và vuông góc với đường thẳng $d: \\frac{x-1}{2} = \\frac{y}{1} = \\frac{z+1}{-2}$.', options: ['A. $2x + y - 2z - 5 = 0$', 'B. $2x + y - 2z + 5 = 0$', 'C. $2x + y - 2z - 3 = 0$', 'D. $x + y - z - 3 = 0$'], answer: 'A', solution: 'Mặt phẳng có VTPT chính là VTCP của đường thẳng $d$, là $\\vec{n}=(2;1;-2)$.' },
                        { id: 't_hhoz_5', level: 3, question: 'Trong Oxyz, tìm góc giữa hai đường thẳng $d_1: \\frac{x}{1} = \\frac{y}{2} = \\frac{z}{-1}$ và $d_2$ có VTCP $\\vec{u_2}=(1;0;1)$.', options: ['A. $30^\\circ$', 'B. $45^\\circ$', 'C. $60^\\circ$', 'D. $90^\\circ$'], answer: 'D', solution: 'VTCP của $d_1$ là $\\vec{u_1}=(1;2;-1)$. Tích vô hướng $\\vec{u_1} \\cdot \\vec{u_2} = 1*1 + 2*0 + (-1)*1 = 0$. Vậy hai đường thẳng vuông góc.' }
                    ]
                }
            },
            "van": {
                name: "Ngữ Văn",
                subtopics: {
                    "tac-gia-nam-cao": "Tác giả Nam Cao",
                    "chi-pheo": "Tác phẩm Chí Phèo",
                    "viet-bac": "Bài thơ Việt Bắc (Tố Hữu)",
                    "dat-nuoc": "Đoạn trích Đất Nước (Nguyễn Khoa Điềm)",
                    "tay-tien": "Bài thơ Tây Tiến (Quang Dũng)",
                },
                questions: {
                    "tac-gia-nam-cao": [
                        { id: 'v_nc_1', question: 'Tên thật của nhà văn Nam Cao là gì?', options: ['A. Nguyễn Tường Lân', 'B. Trần Hữu Tri', 'C. Nguyễn Tường Tam', 'D. Nguyễn Trung Thành'], answer: 'B', solution: 'Tên thật của nhà văn Nam Cao là Trần Hữu Tri.' },
                        { id: 'v_nc_2', question: 'Nam Cao sinh ra ở đâu?', options: ['A. Mỹ Hào, Hưng Yên', 'B. Bình Lục, Hà Nam', 'C. Lý Nhân, Hà Nam', 'D. Nghi Xuân, Hà Tĩnh'], answer: 'C', solution: 'Nam Cao sinh tại làng Đại Hoàng, xã Hòa Hậu, huyện Lý Nhân, tỉnh Hà Nam.' },
                        { id: 'v_nc_4', question: 'Quan điểm nghệ thuật nào được Nam Cao thể hiện trong tác phẩm "Trăng sáng"?', options: ['A. “Nghệ thuật vị nghệ thuật”', 'B. “Nghệ thuật không cần phải là ánh trăng lừa dối”', 'C. “Nghệ thuật vị nhân sinh”', 'D. Cả B và C'], answer: 'D', solution: 'Nam Cao phê phán quan điểm "nghệ thuật vị nghệ thuật" xa rời đời sống và khẳng định nghệ thuật chân chính phải gắn bó với cuộc đời, phục vụ con người.' },
                        { id: 'v_nc_5', question: 'Sáng tác của Nam Cao trước Cách mạng tập trung vào hai đề tài chính nào?', options: ['A. Người trí thức nghèo và người nông dân nghèo', 'B. Người trí thức nghèo và người phụ nữ', 'C. Người phụ nữ và người nông dân nghèo', 'D. Người lính và chiến tranh'], answer: 'A', solution: 'Hai mảng đề tài lớn nhất của Nam Cao trước 1945 là về cuộc sống bi kịch của người trí thức nghèo và người nông dân nghèo.' },
                        { id: 'v_nc_8', question: 'Năm 1996, Nam Cao được nhà nước truy tặng giải thưởng cao quý nào?', options: ['A. Giải thưởng Hồ Chí Minh về văn học nghệ thuật', 'B. Huân chương Độc lập', 'C. Giải thưởng Văn học ASEAN', 'D. Anh hùng Lao động'], answer: 'A', solution: 'Năm 1996, Nam Cao được truy tặng Giải thưởng Hồ Chí Minh về văn học nghệ thuật đợt I.' },
                    ],
                    "chi-pheo": [
                        { id: 'v_cp_0', question: 'Tác phẩm "Chí Phèo" được sáng tác năm bao nhiêu?', options: ['A. 1941', 'B. 1942', 'C. 1943', 'D. 1944'], answer: 'A', solution: 'Truyện ngắn "Chí Phèo" được Nam Cao sáng tác vào năm 1941.' },
                        { id: 'v_cp_01', question: 'Khi xuất bản lần đầu, nhà xuất bản đã tự ý đổi tên tác phẩm "Chí Phèo" thành gì?', options: ['A. Cái lò gạch cũ', 'B. Đôi lứa xứng đôi', 'C. Làng Vũ Đại ngày ấy', 'D. Thằng Chí'], answer: 'B', solution: 'Tên gốc là "Cái lò gạch cũ". Nhà xuất bản Đời Mới đã đổi thành "Đôi lứa xứng đôi" khi in sách.' },
                        { id: 'v_cp_02', question: 'Chí Phèo có xuất thân như thế nào?', options: ['A. Cha mẹ mất sớm, đi ở cho nhà Bá Kiến', 'B. Là đứa trẻ mồ côi, bị bỏ ở cái lò gạch cũ, qua tay nhiều người nuôi', 'C. Cha mẹ nghèo nên bị bán đi ở', 'D. Là con ngoài giá thú của Bá Kiến'], answer: 'B', solution: 'Chí Phèo là đứa trẻ sơ sinh bị bỏ rơi trong một cái lò gạch cũ, được người làng chuyền tay nhau nuôi nấng.' },
                        { id: 'v_cp_03', question: 'Nguyên nhân trực tiếp nào đã khiến Chí Phèo phải vào tù?', options: ['A. Vì cơn ghen của Bá Kiến', 'B. Vì Chí Phèo đánh nhau với người trong làng', 'C. Vì Chí Phèo ăn trộm', 'D. Vì đánh bạc'], answer: 'A', solution: 'Do ghen tuông vô cớ với vợ ba của mình, Bá Kiến đã dùng quyền lực đẩy Chí Phèo lương thiện vào tù.' },
                        { id: 'v_cp_06', question: 'Ý nghĩa tiếng chửi của Chí Phèo ở đầu tác phẩm là gì?', options: ['A. Là tiếng chửi trong vô thức của một kẻ say', 'B. Thể hiện nỗi cô độc và khao khát được giao tiếp', 'C. Phản ứng lại cả xã hội đã từ chối mình', 'D. Cả B và C'], answer: 'D', solution: 'Tiếng chửi của Chí Phèo vừa là sự phẫn uất, vừa là biểu hiện bi thảm của một con người khao khát được giao tiếp nhưng không ai đáp lại.' },
                        { id: 'v_cp_09', question: 'Ý nghĩa của chi tiết "bát cháo hành" là gì?', options: ['A. Là liều thuốc giải cảm cho Chí Phèo', 'B. Là hương vị của tình yêu, hạnh phúc muộn màng', 'C. Khơi dậy khao khát được làm người lương thiện', 'D. Tất cả các đáp án trên'], answer: 'D', solution: 'Bát cháo hành là chi tiết kết tinh giá trị nhân đạo của tác phẩm, là thứ đánh thức và nuôi dưỡng phần lương thiện còn sót lại trong Chí Phèo.' },
                        { id: 'v_cp_10', question: 'Nhân vật nào đại diện cho định kiến xã hội, đã thẳng thừng cự tuyệt khát vọng hoàn lương của Chí Phèo?', options: ['A. Bá Kiến', 'B. Thị Nở', 'C. Bà cô Thị Nở', 'D. Lý Cường'], answer: 'C', solution: 'Bà cô Thị Nở, với những thành kiến giai cấp cổ hủ, đã ngăn cản Thị Nở đến với Chí Phèo, gián tiếp đẩy Chí vào bi kịch.' },
                        { id: 'v_cp_11', question: 'Ý nghĩa hành động đâm chết Bá Kiến và tự sát của Chí Phèo là gì?', options: ['A. Hành động bột phát của kẻ say rượu', 'B. Là sự trả thù cá nhân', 'C. Lời tố cáo xã hội và sự bế tắc của người nông dân khi muốn sống lương thiện', 'D. Chí Phèo bị điên loạn'], answer: 'C', solution: 'Hành động cuối cùng của Chí Phèo là hành động có ý thức, là lời tố cáo đanh thép xã hội thực dân nửa phong kiến tàn bạo.' },
                        { id: 'v_cp_12', question: 'Ý nghĩa chi tiết cái lò gạch cũ xuất hiện ở đầu và cuối tác phẩm là gì?', options: ['A. Cho thấy sự luẩn quẩn, bế tắc của số phận người nông dân', 'B. Gợi ra sự tiếp diễn của bi kịch trong xã hội cũ', 'C. Tạo kết cấu đầu cuối tương ứng cho tác phẩm', 'D. Tất cả các đáp án trên'], answer: 'D', solution: 'Hình ảnh cái lò gạch cũ mang ý nghĩa sâu sắc, gợi ra sự luẩn quẩn, bế tắc của bi kịch trong xã hội cũ.' },
                    ],
                    "viet-bac": [
                        { id: 'v_vb_1', question: 'Bài thơ "Việt Bắc" của Tố Hữu được sáng tác trong hoàn cảnh nào?', options: ['A. Ngay sau khi Cách mạng tháng Tám thành công năm 1945', 'B. Trong chiến dịch Điện Biên Phủ năm 1954', 'C. Khi Trung ương Đảng và Chính phủ rời chiến khu Việt Bắc về lại Hà Nội năm 1954', 'D. Sau khi Hiệp định Paris được ký kết năm 1973'], answer: 'C', solution: 'Bài thơ được sáng tác tháng 10/1954, nhân sự kiện các cơ quan Trung ương Đảng và Chính phủ rời chiến khu Việt Bắc để trở về thủ đô Hà Nội sau chiến thắng Điện Biên Phủ.' },
                        { id: 'v_vb_2', question: 'Cấu trúc của bài thơ "Việt Bắc" được thể hiện qua hình thức nào?', options: ['A. Lời đối đáp giữa một chàng trai và một cô gái', 'B. Lời tâm tình của người cán bộ kháng chiến', 'C. Lời đối đáp của người đi (cán bộ) và người ở lại (nhân dân Việt Bắc)', 'D. Lời kể chuyện của tác giả'], answer: 'C', solution: 'Bài thơ được cấu tứ theo hình thức đối đáp quen thuộc của ca dao, dân ca, là lời của người ở lại và người ra đi, thể hiện tình cảm gắn bó sâu nặng.' },
                        { id: 'v_vb_3', question: 'Cụm từ "mình đi, mình về" trong bài thơ "Việt Bắc" chỉ những ai?', options: ['A. "Mình đi" chỉ người dân, "mình về" chỉ người cán bộ', 'B. "Mình đi" và "mình về" đều chỉ người cán bộ kháng chiến', 'C. "Mình đi" chỉ người cán bộ, "mình về" chỉ người dân', 'D. Cả hai đều chỉ người dân Việt Bắc'], answer: 'B', solution: 'Cách xưng hô "mình" và lối đối đáp tài tình của Tố Hữu làm cho lời thơ vừa là lời của người ở lại, vừa là lời của người ra đi, thể hiện sự hòa quyện, gắn bó keo sơn.' },
                        { id: 'v_vb_4', question: 'Vẻ đẹp của thiên nhiên và con người Việt Bắc được thể hiện nổi bật qua khổ thơ nào?', options: ['A. "Mình về, có nhớ núi non..."', 'B. "Ta về, mình có nhớ ta..."', 'C. "Những đường Việt Bắc của ta..."', 'D. "Nhớ gì như nhớ người yêu..."'], answer: 'B', solution: 'Khổ thơ "Ta về, mình có nhớ ta..." là bộ tranh tứ bình đặc sắc về cảnh và người Việt Bắc qua bốn mùa xuân, hạ, thu, đông.' },
                    ],
                    "dat-nuoc": [
                        { id: 'v_dn_1', question: 'Đoạn trích "Đất Nước" của Nguyễn Khoa Điềm thuộc phần nào của trường ca "Mặt đường khát vọng"?', options: ['A. Phần đầu của chương V', 'B. Phần cuối của chương V', 'C. Toàn bộ chương VI', 'D. Phần đầu của chương I'], answer: 'A', solution: 'Đoạn trích "Đất Nước" nằm ở phần đầu chương V của bản trường ca "Mặt đường khát vọng".' },
                        { id: 'v_dn_2', question: 'Tư tưởng cốt lõi, xuyên suốt đoạn trích "Đất Nước" là gì?', options: ['A. Đất Nước của Ca dao thần thoại', 'B. Đất Nước của Vua chúa, anh hùng', 'C. Đất Nước của Nhân dân', 'D. Đất Nước của thế hệ trẻ'], answer: 'C', solution: 'Tư tưởng chủ đạo, mới mẻ của Nguyễn Khoa Điềm là "Đất Nước của Nhân dân, Đất Nước của ca dao thần thoại", nhấn mạnh vai trò của nhân dân trong việc làm nên và bảo vệ đất nước.' },
                        { id: 'v_dn_3', question: 'Theo Nguyễn Khoa Điềm, Đất Nước được hình thành từ những yếu tố nào?', options: ['A. Từ những truyền thuyết lịch sử hào hùng', 'B. Từ những phong tục, tập quán, văn hóa lâu đời', 'C. Từ tình yêu đôi lứa, tình cảm gia đình', 'D. Tất cả các đáp án trên'], answer: 'D', solution: 'Nhà thơ đã khám phá Đất Nước trên nhiều phương diện: chiều dài lịch sử, chiều rộng không gian và chiều sâu văn hóa, tất cả đều gắn liền với đời sống bình dị của nhân dân.' },
                        { id: 'v_dn_4', question: 'Biện pháp nghệ thuật nổi bật nhất được sử dụng trong đoạn trích "Đất Nước" là gì?', options: ['A. So sánh, ẩn dụ', 'B. Liệt kê, điệp ngữ', 'C. Sử dụng chất liệu văn hóa dân gian', 'D. Tương phản, đối lập'], answer: 'C', solution: 'Nguyễn Khoa Điềm đã vận dụng một cách sáng tạo và nhuần nhuyễn chất liệu văn hóa dân gian (ca dao, tục ngữ, truyện cổ tích, phong tục...) để thể hiện tư tưởng của mình.' },
                    ],
                    "tay-tien": [
                        { id: 'v_tt_1', question: 'Cảm hứng chủ đạo của bài thơ "Tây Tiến" là gì?', options: ['A. Cảm hứng lãng mạn và tinh thần bi tráng', 'B. Cảm hứng hiện thực phê phán', 'C. Cảm hứng về tình yêu đôi lứa', 'D. Cảm hứng về thiên nhiên đất nước'], answer: 'A', solution: 'Bài thơ được bao trùm bởi cảm hứng lãng mạn và tinh thần bi tráng, ca ngợi vẻ đẹp của người lính trên nền thiên nhiên Tây Bắc hùng vĩ.' },
                        { id: 'v_tt_2', question: 'Hình ảnh nào thể hiện vẻ đẹp hào hoa, lãng mạn của người lính Tây Tiến?', options: ['A. "Tây Tiến đoàn binh không mọc tóc"', 'B. "Mắt trừng gửi mộng qua biên giới"', 'C. "Đêm mơ Hà Nội dáng kiều thơm"', 'D. "Rải rác biên cương mồ viễn xứ"'], answer: 'C', solution: 'Câu thơ cho thấy dù trong hoàn cảnh gian khổ, tâm hồn những người lính trẻ vẫn luôn lãng mạn, hướng về hậu phương.' },
                        { id: 'v_tt_3', question: 'Câu thơ "Sông Mã gầm lên khúc độc hành" thể hiện điều gì?', options: ['A. Sự dữ dội của thiên nhiên', 'B. Nỗi cô đơn của người lính', 'C. Âm thanh hùng tráng tiễn đưa người lính về với đất mẹ', 'D. Tiếng kêu cứu của người lính'], answer: 'C', solution: 'Thiên nhiên Sông Mã như tấu lên một khúc nhạc bi hùng, dữ dội để tiễn đưa sự hy sinh của người lính, làm cho cái chết trở nên bi tráng.' },
                        { id: 'v_tt_4', question: 'Nét đặc sắc về nghệ thuật của bài thơ "Tây Tiến" là gì?', options: ['A. Bút pháp hiện thực, trần trụi', 'B. Ngôn ngữ chính luận, giàu sức thuyết phục', 'C. Bút pháp lãng mạn, ngôn ngữ giàu hình ảnh và nhạc điệu', 'D. Giọng thơ bi lụy, sầu thảm'], answer: 'C', solution: 'Bài thơ là sự kết hợp hài hòa giữa bút pháp lãng mạn và hiện thực, với ngôn ngữ thơ giàu chất tạo hình, đầy nhạc điệu và màu sắc.' },
                    ]
                }
            },
             "ly": {
                name: "Vật Lý",
                subtopics: {
                    "dao-dong-dieu-hoa": "Dao động điều hòa",
                    "song-co-song-anh-sang": "Sóng cơ và sóng ánh sáng",
                    "dien-xoay-chieu": "Dòng điện xoay chiều",
                    "luong-tu-hat-nhan": "Lượng tử & Hạt nhân",
                    "chuong-chat-khi": "Chất khí"
                },
                questions: {
                    "dao-dong-dieu-hoa": [
                        { id: 'l_dd_1', level: 1, question: 'Đại lượng nào không phải là đặc trưng của dao động điều hòa?', options: ['A. Biên độ', 'B. Tần số góc', 'C. Chu kì', 'D. Lực cản'], answer: 'D', solution: 'Lực cản là yếu tố gây ra dao động tắt dần, không phải đặc trưng của dao động điều hòa lý tưởng.' },
                        { id: 'l_dd_2', level: 2, question: 'Một vật dao động điều hòa có phương trình $x = 5\\cos(4\\pi t + \\frac{\\pi}{6})$ (cm). Vận tốc của vật tại $t = 0.5s$ là:', options: ['A. $-10\\pi$ cm/s', 'B. $10\\pi$ cm/s', 'C. $20\\pi$ cm/s', 'D. $-20\\pi$ cm/s'], answer: 'A', solution: 'Vận tốc $v = x\'$. Thay số và tính toán.' },
                        { id: 'l_dd_3', level: 1, question: 'Chu kì dao động của con lắc lò xo được tính bằng công thức nào?', options: ['A. $T = 2\\pi\\sqrt{\\frac{k}{m}}$', 'B. $T = 2\\pi\\sqrt{\\frac{m}{k}}$', 'C. $T = \\frac{1}{2\\pi}\\sqrt{\\frac{k}{m}}$', 'D. $T = \\frac{1}{2\\pi}\\sqrt{\\frac{m}{k}}$'], answer: 'B', solution: 'Công thức chu kì con lắc lò xo là $T = 2\\pi\\sqrt{\\frac{m}{k}}$.' },
                        { id: 'l_dd_4', level: 2, question: 'Một con lắc đơn có chu kì $T$. Nếu tăng chiều dài lên 4 lần thì chu kì sẽ:', options: ['A. Tăng 2 lần', 'B. Giảm 2 lần', 'C. Tăng 4 lần', 'D. Không đổi'], answer: 'A', solution: 'Chu kì con lắc đơn $T \\sim \\sqrt{l}$. Nếu $l$ tăng 4 lần, $T$ sẽ tăng $\\sqrt{4} = 2$ lần.' },
                        { id: 'l_dd_5', level: 3, question: 'Vật dao động điều hòa có động năng bằng thế năng khi vật ở vị trí:', options: ['A. $x=A$', 'B. $x=0$', 'C. $x = \\pm \\frac{A}{\\sqrt{2}}$', 'D. $x = \\pm \\frac{A}{2}$'], answer: 'C', solution: 'Khi $W_d = W_t \\implies W_t = W/2 \\implies \\frac{1}{2}kx^2 = \\frac{1}{2}(\\frac{1}{2}kA^2) \\implies x = \\pm \\frac{A}{\\sqrt{2}}$.' },
                    ],
                    "song-co-song-anh-sang": [
                        { id: 'l_sc_1', level: 1, question: 'Sóng cơ không truyền được trong môi trường nào?', options: ['A. Rắn', 'B. Lỏng', 'C. Khí', 'D. Chân không'], answer: 'D', solution: 'Sóng cơ cần môi trường vật chất để lan truyền.' },
                        { id: 'l_sc_2', level: 2, question: 'Một sóng cơ có tần số 50 Hz và bước sóng 0.5 m. Vận tốc truyền sóng là:', options: ['A. 25 m/s', 'B. 100 m/s', 'C. 10 m/s', 'D. 2.5 m/s'], answer: 'A', solution: '$v = \\lambda \\cdot f = 0.5 \\times 50 = 25$ m/s.' },
                        { id: 'l_sa_1', level: 1, question: 'Phát biểu nào đúng về sóng ánh sáng?', options: ['A. Là sóng dọc', 'B. Là sóng điện từ', 'C. Không truyền được trong chân không', 'D. Có bước sóng lớn hơn tia hồng ngoại'], answer: 'B', solution: 'Sóng ánh sáng là sóng điện từ, truyền được trong chân không.' },
                        { id: 'l_sa_2', level: 2, question: 'Khi ánh sáng truyền từ không khí vào nước, đại lượng nào không đổi?', options: ['A. Vận tốc', 'B. Bước sóng', 'C. Tần số', 'D. Hướng truyền'], answer: 'C', solution: 'Tần số của sóng chỉ phụ thuộc vào nguồn phát.' },
                        { id: 'l_sa_5', level: 3, question: 'Trong thí nghiệm Young, khoảng vân $i$ được tính bằng công thức:', options: ['A. $i = \\frac{\\lambda D}{a}$', 'B. $i = \\frac{aD}{\\lambda}$', 'C. $i = \\frac{\\lambda a}{D}$', 'D. $i = \\lambda a D$'], answer: 'A', solution: 'Khoảng vân $i = \\frac{\\lambda D}{a}$.' },
                    ],
                    "dien-xoay-chieu": [
                        { id: 'l_dx_1', level: 1, question: 'Đại lượng đặc trưng cho sự cản trở dòng điện xoay chiều của cuộn cảm là:', options: ['A. Điện trở thuần', 'B. Dung kháng', 'C. Cảm kháng', 'D. Tổng trở'], answer: 'C', solution: 'Cảm kháng $Z_L = \\omega L$.' },
                        { id: 'l_dx_2', level: 1, question: 'Trong mạch điện xoay chiều chỉ có tụ điện, hiệu điện thế hai đầu mạch...', options: ['A. sớm pha $\\pi/2$ so với dòng điện.', 'B. trễ pha $\\pi/2$ so với dòng điện.', 'C. cùng pha với dòng điện.', 'D. ngược pha với dòng điện.'], answer: 'B', solution: 'Trong mạch chỉ có tụ điện, u trễ pha $\\pi/2$ so với i.' },
                        { id: 'l_dx_3', level: 2, question: 'Mạch RLC nối tiếp có $Z_L > Z_C$ thì mạch có tính:', options: ['A. Cảm kháng', 'B. Dung kháng', 'C. Cộng hưởng', 'D. Thuần trở'], answer: 'A', solution: 'Khi $Z_L > Z_C$, mạch có tính cảm kháng, u sớm pha hơn i.' },
                        { id: 'l_dx_4', level: 3, question: 'Mạch RLC có $R = 50\\Omega$, $Z_L = 100\\Omega$, $Z_C = 50\\Omega$. Đặt vào mạch điện áp $u = 100\\sqrt{2}\\cos(100\\pi t)$ V. Cường độ hiệu dụng là:', options: ['A. $2A$', 'B. $\\sqrt{2}A$', 'C. $1A$', 'D. $2\\sqrt{2}A$'], answer: 'B', solution: 'Tổng trở $Z = \\sqrt{R^2 + (Z_L - Z_C)^2} = 50\\sqrt{2} \\Omega$. $I = U/Z = 100/(50\\sqrt{2}) = \\sqrt{2}A$.' },
                        { id: 'l_dx_5', level: 2, question: 'Hiện tượng cộng hưởng điện xảy ra trong mạch RLC nối tiếp khi:', options: ['A. $R = |Z_L - Z_C|$', 'B. $Z_L = Z_C$', 'C. $Z_L > Z_C$', 'D. $Z_L < Z_C$'], answer: 'B', solution: 'Cộng hưởng điện xảy ra khi $Z_L=Z_C$.' },
                    ],
                    "luong-tu-hat-nhan": [
                        { id: 'l_lthn_1', level: 1, question: 'Hiện tượng ánh sáng làm bật các electron ra khỏi bề mặt kim loại gọi là:', options: ['A. Hiện tượng quang - phát quang', 'B. Hiện tượng quang điện', 'C. Hiện tượng tán sắc', 'D. Hiện tượng giao thoa'], answer: 'B', solution: 'Đây là định nghĩa của hiện tượng quang điện ngoài.' },
                        { id: 'l_lthn_2', level: 2, question: 'Theo thuyết lượng tử ánh sáng, ánh sáng được tạo thành bởi các hạt gọi là:', options: ['A. Electron', 'B. Proton', 'C. Nơtron', 'D. Photon'], answer: 'D', solution: 'Các hạt này được gọi là các photon (lượng tử ánh sáng).' },
                        { id: 'l_lthn_3', level: 2, question: 'Hạt nhân nguyên tử được cấu tạo từ các hạt:', options: ['A. Proton và electron', 'B. Nơtron và electron', 'C. Proton và nơtron', 'D. Chỉ có proton'], answer: 'C', solution: 'Hạt nhân được cấu tạo từ các nucleon, bao gồm proton và nơtron.' },
                        { id: 'l_lthn_4', level: 3, question: 'Phản ứng hạt nhân nào sau đây là phản ứng nhiệt hạch?', options: ['A. $_{92}^{235}U + n \\rightarrow _{56}^{144}Ba + _{36}^{89}Kr + 3n$', 'B. $_1^2D + _1^3T \\rightarrow _2^4He + n$', 'C. $_{84}^{210}Po \\rightarrow _{82}^{206}Pb + \\alpha$', 'D. $_6^{14}C \\rightarrow _7^{14}N + e^-$'], answer: 'B', solution: 'Phản ứng nhiệt hạch là phản ứng kết hợp hai hạt nhân nhẹ thành một hạt nhân nặng hơn, ví dụ như phản ứng tổng hợp heli từ đơteri và triti.' },
                        { id: 'l_lthn_5', level: 1, question: 'Tia phóng xạ nào sau đây có bản chất là sóng điện từ?', options: ['A. Tia alpha ($\\alpha$)', 'B. Tia beta cộng ($\\beta^+$)', 'C. Tia beta trừ ($\\beta^-$)', 'D. Tia gamma ($\\gamma$)'], answer: 'D', solution: 'Tia gamma là sóng điện từ có bước sóng rất ngắn, mang năng lượng cao.' },
                    ],
                    "chuong-chat-khi": [
                        { id: 'l_ck_1', level: 1, question: 'Theo thuyết động học phân tử chất khí, các phân tử khí được coi là:', options: ['A. Luôn đứng yên', 'B. Chuyển động hỗn loạn không ngừng', 'C. Chỉ chuyển động khi bị nung nóng', 'D. Sắp xếp theo một trật tự nhất định'], answer: 'B', solution: 'Các phân tử khí được coi là các chất điểm chuyển động hỗn loạn không ngừng.' },
                        { id: 'l_ck_2', level: 2, question: 'Quá trình biến đổi trạng thái trong đó nhiệt độ được giữ không đổi gọi là quá trình gì?', options: ['A. Đẳng tích', 'B. Đẳng áp', 'C. Đẳng nhiệt', 'D. Đoạn nhiệt'], answer: 'C', solution: 'Quá trình đẳng nhiệt có T = const.' },
                        { id: 'l_ck_4', level: 2, question: 'Khi áp suất của một lượng khí tăng 2 lần và nhiệt độ tuyệt đối giảm 2 lần thì thể tích sẽ:', options: ['A. Tăng 4 lần', 'B. Giảm 4 lần', 'C. Không đổi', 'D. Tăng 2 lần'], answer: 'B', solution: 'Từ $\\frac{P_1V_1}{T_1} = \\frac{P_2V_2}{T_2} \\Rightarrow V_2 = V_1 \\frac{P_1}{P_2}\\frac{T_2}{T_1} = V_1 \\frac{1}{2}\\frac{1}{2} = \\frac{V_1}{4}$.' },
                        { id: 'l_ck_8', level: 3, question: 'Một bình kín chứa khí ở $27^\\circ C$, áp suất $2$ atm. Nung nóng bình đến $127^\\circ C$ thì áp suất là bao nhiêu?', options: ['A. $\\approx 2.67$ atm', 'B. $1.5$ atm', 'C. $3$ atm', 'D. $9.4$ atm'], answer: 'A', solution: 'Đẳng tích. $T_1 = 300K, T_2 = 400K$. $\\frac{P_2}{P_1} = \\frac{T_2}{T_1} \\Rightarrow P_2 = 2 \\cdot \\frac{400}{300} \\approx 2.67$ atm.' },
                    ]
                }
            },
            "su": {
                name: "Lịch Sử",
                subtopics: {
                    "viet-nam-1919-1945": "Việt Nam (1919-1945)",
                    "khang-chien-chong-phap": "Kháng chiến chống Pháp (1945-1954)",
                    "khang-chien-chong-my": "Kháng chiến chống Mỹ (1954-1975)"
                },
                questions: {
                    "viet-nam-1919-1945": [
                        { id: 's_vn1945_1', question: 'Sự kiện nào đánh dấu bước ngoặt trong cuộc đời hoạt động của Nguyễn Ái Quốc?', options: ['A. Gửi "Bản yêu sách của nhân dân An Nam" tới Hội nghị Véc-xai', 'B. Đọc "Sơ thảo lần thứ nhất những luận cương về vấn đề dân tộc và vấn đề thuộc địa" của Lênin', 'C. Tham gia sáng lập Đảng Cộng sản Pháp', 'D. Sáng lập Hội Việt Nam Cách mạng Thanh niên'], answer: 'B', solution: 'Sau khi đọc luận cương của Lênin, Nguyễn Ái Quốc đã tìm thấy con đường cứu nước đúng đắn cho dân tộc: con đường cách mạng vô sản.' },
                        { id: 's_vn1945_2', question: 'Hội nghị thành lập Đảng Cộng sản Việt Nam (đầu năm 1930) được diễn ra ở đâu?', options: ['A. Hà Nội, Việt Nam', 'B. Quảng Châu, Trung Quốc', 'C. Cửu Long, Hương Cảng (Trung Quốc)', 'D. Paris, Pháp'], answer: 'C', solution: 'Hội nghị hợp nhất các tổ chức cộng sản được tổ chức tại Cửu Long, Hương Cảng, Trung Quốc dưới sự chủ trì của Nguyễn Ái Quốc.' },
                        { id: 's_vn1945_3', question: 'Đỉnh cao của phong trào cách mạng 1930-1931 là sự ra đời của:', options: ['A. Các cuộc bãi công của công nhân', 'B. Các cuộc biểu tình của nông dân', 'C. Phong trào phá xiềng xích', 'D. Chính quyền Xô viết Nghệ - Tĩnh'], answer: 'D', solution: 'Sự ra đời và tồn tại của chính quyền Xô viết ở hai tỉnh Nghệ An và Hà Tĩnh là đỉnh cao của phong trào, thể hiện quyền làm chủ của nhân dân lao động.' },
                        { id: 's_vn1945_4', question: 'Sự kiện nào tạo ra thời cơ "ngàn năm có một" cho Cách mạng tháng Tám năm 1945?', options: ['A. Nhật đảo chính Pháp (9/3/1945)', 'B. Chiến tranh thế giới thứ hai kết thúc', 'C. Nhật hoàng tuyên bố đầu hàng Đồng minh không điều kiện (15/8/1945)', 'D. Đảng Cộng sản Đông Dương ra chỉ thị "Nhật-Pháp bắn nhau và hành động của chúng ta"'], answer: 'C', solution: 'Việc Nhật đầu hàng Đồng minh đã tạo ra một khoảng trống quyền lực, là thời cơ khách quan vô cùng thuận lợi cho nhân dân ta vùng lên giành chính quyền.' },
                    ],
                    "khang-chien-chong-phap": [
                        { id: 's_fr_1', question: 'Cuộc kháng chiến chống Pháp (1945-1954) kết thúc bằng chiến thắng nào?', options: ['A. Chiến dịch Điện Biên Phủ', 'B. Chiến dịch Biên giới Thu Đông', 'C. Chiến dịch Việt Bắc', 'D. Tổng khởi nghĩa tháng Tám'], answer: 'A', solution: 'Chiến thắng Điện Biên Phủ (7/5/1954) đã đập tan hoàn toàn kế hoạch Navarre, giáng đòn quyết định vào ý chí xâm lược của Pháp.' },
                        { id: 's_fr_2', question: 'Nguyên nhân cơ bản nhất dẫn đến thắng lợi của cuộc kháng chiến chống Pháp là gì?', options: ['A. Sự lãnh đạo sáng suốt của Đảng và Chủ tịch Hồ Chí Minh', 'B. Sự giúp đỡ của các nước xã hội chủ nghĩa', 'C. Tinh thần đoàn kết của nhân dân Đông Dương', 'D. Quân đội Pháp suy yếu'], answer: 'A', solution: 'Sự lãnh đạo đúng đắn của Đảng với đường lối kháng chiến đúng đắn là nhân tố quyết định hàng đầu mọi thắng lợi.' },
                        { id: 's_fr_4', question: 'Hiệp định nào được kí kết sau chiến thắng Điện Biên Phủ, chấm dứt chiến tranh ở Đông Dương?', options: ['A. Hiệp định Sơ bộ', 'B. Tạm ước 14/9', 'C. Hiệp định Genève 1954', 'D. Hiệp định Paris 1973'], answer: 'C', solution: 'Hiệp định Genève 1954 công nhận độc lập, chủ quyền, thống nhất và toàn vẹn lãnh thổ của ba nước Đông Dương.' },
                        { id: 's_fr_5', question: 'Thắng lợi của chiến dịch Biên giới Thu-Đông 1950 có ý nghĩa gì?', options: ['A. Kết thúc hoàn toàn chiến tranh', 'B. Giành được thế chủ động trên chiến trường chính Bắc Bộ', 'C. Mở đầu cho cuộc tổng tấn công', 'D. Buộc Pháp phải rút quân'], answer: 'B', solution: 'Thắng lợi của chiến dịch Biên giới đã phá tan thế bao vây của địch và giúp quân ta giành được thế chủ động chiến lược.' },
                        { id: 's_fr_6', question: 'Đâu là văn kiện thể hiện rõ nhất đường lối kháng chiến chống Pháp của ta?', options: ['A. Lời kêu gọi toàn quốc kháng chiến', 'B. Tác phẩm "Kháng chiến nhất định thắng lợi"', 'C. Chỉ thị "Toàn dân kháng chiến"', 'D. Cả A, B, C'], answer: 'D', solution: 'Cả ba văn kiện trên đều thể hiện rõ đường lối "toàn dân, toàn diện, trường kỳ, tự lực cánh sinh và tranh thủ sự ủng hộ quốc tế".' },
                        { id: 's_fr_7', question: 'Phương châm chiến lược của ta trong cuộc tấn công Đông-Xuân 1953-1954 là gì?', options: ['A. Đánh nhanh thắng nhanh', 'B. Tích cực, chủ động, cơ động, linh hoạt', 'C. Đánh chắc tiến chắc', 'D. Vừa đánh vừa đàm phán'], answer: 'B', solution: 'Phương châm của ta là "Tích cực, chủ động, cơ động, linh hoạt", "đánh chắc, tiến chắc", buộc địch phải phân tán lực lượng.' },
                    ],
                    "khang-chien-chong-my": [
                        { id: 's_my_1', question: 'Sự kiện nào đánh dấu sự kết thúc thắng lợi cuộc kháng chiến chống Mỹ?', options: ['A. Chiến dịch Hồ Chí Minh', 'B. Tổng tiến công Mậu Thân 1968', 'C. "Điện Biên Phủ trên không" 1972', 'D. Ký kết Hiệp định Paris 1973'], answer: 'A', solution: 'Chiến dịch Hồ Chí Minh lịch sử (30/4/1975) đã giải phóng hoàn toàn miền Nam, thống nhất đất nước.' },
                        { id: 's_my_2', question: 'Sự kiện nào được xem là bước ngoặt của cuộc kháng chiến, buộc Mỹ phải "phi Mỹ hóa" chiến tranh?', options: ['A. Tổng tiến công và nổi dậy Mậu Thân 1968', 'B. "Điện Biên Phủ trên không" 1972', 'C. Phong trào Đồng Khởi 1959-1960', 'D. Chiến thắng Ấp Bắc'], answer: 'A', solution: 'Cuộc Tổng tiến công và nổi dậy Xuân Mậu Thân 1968 đã làm lung lay ý chí xâm lược của Mỹ, buộc Mỹ phải xuống thang chiến tranh.' },
                        { id: 's_my_4', question: 'Chiến thắng nào đã đánh bại hoàn toàn cuộc tập kích chiến lược bằng B52 của Mỹ vào Hà Nội cuối năm 1972?', options: ['A. Chiến dịch Hồ Chí Minh', 'B. Điện Biên Phủ trên không', 'C. Mậu Thân 1968', 'D. Trận Vạn Tường'], answer: 'B', solution: 'Chiến thắng "Điện Biên Phủ trên không" đã đập tan uy thế không lực Hoa Kỳ và buộc Mỹ phải ký Hiệp định Paris.' },
                        { id: 's_my_7', question: 'Bản chất của chiến lược "Việt Nam hóa chiến tranh" của Mỹ là gì?', options: ['A. "Dùng người Việt đánh người Việt"', 'B. Rút toàn bộ quân Mỹ về nước', 'C. Tăng cường viện trợ kinh tế', 'D. Kết thúc chiến tranh bằng đàm phán'], answer: 'A', solution: 'Đây là âm mưu của Mỹ nhằm thay màu da trên xác chết, tiếp tục cuộc chiến tranh xâm lược bằng quân đội Sài Gòn.' },
                        { id: 's_my_8', question: 'Chiến thắng nào của quân dân miền Nam đã làm phá sản về cơ bản chiến lược "Chiến tranh đặc biệt" của Mỹ?', options: ['A. Bình Giã', 'B. Ấp Bắc', 'C. Vạn Tường', 'D. Đồng Xoài'], answer: 'A', solution: 'Chiến thắng Bình Giã (12/1964) đã làm phá sản về cơ bản chiến lược "Chiến tranh đặc biệt" của đế quốc Mỹ.' },
                        { id: 's_my_9', question: 'Đại hội đại biểu toàn quốc lần thứ III của Đảng (9/1960) đã xác định nhiệm vụ của cách mạng miền Bắc là gì?', options: ['A. Xây dựng chủ nghĩa xã hội', 'B. Tiến hành cách mạng dân tộc dân chủ nhân dân', 'C. Chống đế quốc Mỹ và tay sai', 'D. Thống nhất đất nước'], answer: 'A', solution: 'Đại hội III xác định miền Bắc có vai trò là hậu phương lớn, thực hiện nhiệm vụ xây dựng chủ nghĩa xã hội để chi viện cho tiền tuyến miền Nam.' },
                        { id: 's_my_10', question: 'Hiệp định Paris về Việt Nam được ký kết vào ngày tháng năm nào?', options: ['A. 27/01/1973', 'B. 30/04/1975', 'C. 02/09/1945', 'D. 07/05/1954'], answer: 'A', solution: 'Hiệp định Paris về chấm dứt chiến tranh, lập lại hòa bình ở Việt Nam được ký chính thức vào ngày 27/01/1973.' },
                    ]
                }
            },
            "xa-hoi": {
                name: "Kiến thức Xã hội",
                questions: [
                    { id: 'xh_1', question: 'Thủ đô của Việt Nam là thành phố nào?', options: ['A. Thành phố Hồ Chí Minh', 'B. Đà Nẵng', 'C. Hà Nội', 'D. Huế'], answer: 'C', solution: 'Thủ đô của nước Cộng hòa Xã hội Chủ nghĩa Việt Nam là Hà Nội.' },
                    { id: 'xh_2', question: 'Tổ chức nào của Liên Hợp Quốc hoạt động về giáo dục, khoa học và văn hóa?', options: ['A. WHO', 'B. UNICEF', 'C. UNESCO', 'D. WTO'], answer: 'C', solution: 'UNESCO (United Nations Educational, Scientific and Cultural Organization) là Tổ chức Giáo dục, Khoa học và Văn hóa của Liên Hợp Quốc.' },
                    { id: 'xh_3', question: 'Nguồn năng lượng nào được coi là năng lượng tái tạo?', options: ['A. Than đá', 'B. Dầu mỏ', 'C. Năng lượng mặt trời', 'D. Khí đốt tự nhiên'], answer: 'C', solution: 'Năng lượng mặt trời là năng lượng tái tạo. Than đá, dầu mỏ và khí đốt là nhiên liệu hóa thạch.' },
                    { id: 'xh_4', question: 'Mục tiêu chính của phát triển bền vững là gì?', options: ['A. Chỉ tập trung vào tăng trưởng kinh tế', 'B. Đáp ứng nhu cầu của hiện tại mà không làm tổn hại đến khả năng đáp ứng nhu cầu của các thế hệ tương lai', 'C. Chỉ tập trung bảo vệ môi trường', 'D. Ưu tiên phát triển các nước giàu'], answer: 'B', solution: 'Phát triển bền vững là sự phát triển cân bằng giữa kinh tế, xã hội và môi trường.' },
                    { id: 'xh_5', question: 'Tổ chức quốc tế nào có mục tiêu chính là duy trì hòa bình và an ninh quốc tế?', options: ['A. EU', 'B. ASEAN', 'C. Liên Hợp Quốc (UN)', 'D. WTO'], answer: 'C', solution: 'Liên Hợp Quốc (UN) được thành lập với mục tiêu chính là duy trì hòa bình và an ninh quốc tế.' },
                    { id: 'xh_7', question: 'Văn bản pháp luật nào có hiệu lực pháp lý cao nhất tại Việt Nam?', options: ['A. Bộ luật Dân sự', 'B. Luật Đất đai', 'C. Hiến pháp', 'D. Luật Giáo dục'], answer: 'C', solution: 'Hiến pháp là luật cơ bản của nhà nước, có hiệu lực pháp lý cao nhất.' },
                    { id: 'xh_new_1', question: 'Trong các tỉnh sau, tỉnh nào không có đường bờ biển: Hải Dương, Thái Bình, Nam Định, Quảng Ninh?', options: ['A. Hải Dương', 'B. Thái Bình', 'C. Nam Định', 'D. Quảng Ninh'], answer: 'A', solution: 'Hải Dương là tỉnh duy nhất trong các tỉnh trên không giáp biển.' },
                    { id: 'xh_new_2', question: '“Mặt Trời của thi ca Nga đã lặn mất rồi!” – báo chí Nga đưa tin như vậy khi ông qua đời. Ông là ai?', options: ['A. Lev Tolstoy', 'B. Fyodor Dostoevsky', 'C. Aleksandr Pushkin', 'D. Anton Chekhov'], answer: 'C', solution: 'Câu nói trên nói về sự ra đi của đại thi hào Aleksandr Pushkin.' },
                    { id: 'xh_new_3', question: 'Quốc hiệu đầu tiên của nước ta là gì?', options: ['A. Đại Việt', 'B. Đại Cồ Việt', 'C. Âu Lạc', 'D. Văn Lang'], answer: 'D', solution: 'Quốc hiệu đầu tiên của nước ta là Văn Lang, gắn liền với thời đại Hùng Vương.' },
                    { id: 'xh_new_4', question: 'Trong chiến dịch Điện Biên Phủ, người anh hùng nào đã lấy thân mình chèn pháo?', options: ['A. Phan Đình Giót', 'B. Tô Vĩnh Diện', 'C. Bế Văn Đàn', 'D. La Văn Cầu'], answer: 'B', solution: 'Anh hùng Tô Vĩnh Diện đã anh dũng hy sinh, lấy thân mình chèn bánh pháo.' },
                    { id: 'xh_new_5', question: 'Vĩ tuyến 17 chạy ngang qua địa phận tỉnh nào của nước ta?', options: ['A. Quảng Bình', 'B. Hà Tĩnh', 'C. Quảng Trị', 'D. Thừa Thiên Huế'], answer: 'C', solution: 'Sông Bến Hải ở tỉnh Quảng Trị, nơi có vĩ tuyến 17 chạy qua, là giới tuyến quân sự tạm thời sau Hiệp định Genève 1954.' },
                    { id: 'xh_new_6', question: 'Khi bị ong đốt, bôi vôi vào vết thương là ứng dụng của loại phản ứng hóa học nào?', options: ['A. Oxi hóa - khử', 'B. Trung hòa', 'C. Thế', 'D. Phân hủy'], answer: 'B', solution: 'Nọc ong chứa axit, vôi là bazơ. Bôi vôi giúp trung hòa axit, làm giảm sưng đau.' },
                    { id: 'xh_new_7', question: 'Hệ Mặt trời của chúng ta nằm trong thiên hà nào?', options: ['A. Thiên hà Tiên Nữ', 'B. Thiên hà Tam Giác', 'C. Dải Ngân hà (Milky Way)', 'D. Thiên hà Xoáy Nước'], answer: 'C', solution: 'Hệ Mặt trời của chúng ta là một phần của Dải Ngân hà (Milky Way).' },
                    { id: 'xh_new_8', question: '“Trái tim lầm lỡ để trên đầu/ Nỏ thần vô ý trao tay giặc” là những lời thơ Tố Hữu viết về ai?', options: ['A. An Dương Vương', 'B. Trọng Thủy', 'C. Mị Châu', 'D. Triệu Đà'], answer: 'C', solution: 'Hai câu thơ trên của Tố Hữu nói về nhân vật Mị Châu trong truyền thuyết An Dương Vương.' },
                    { id: 'xh_new_11', question: 'Nguyễn Tuân đã viết về món ăn nào: “Vào mùa nắng, ăn một bát, ra mồ hôi, gặp cơn gió nhẹ chạy qua... thấy như giời quạt cho mình”?', options: ['A. Bún chả', 'B. Bún riêu', 'C. Phở', 'D. Bún thang'], answer: 'C', solution: 'Đây là những dòng văn nổi tiếng của nhà văn Nguyễn Tuân khi viết về món Phở.' },
                    { id: 'xh_new_12', question: 'Đợt rét muộn cuối cùng vào tháng ba âm lịch ở miền Bắc thường được gọi là gì?', options: ['A. Rét đậm', 'B. Rét hại', 'C. Rét Nàng Bân', 'D. Rét ngọt'], answer: 'C', solution: 'Đợt rét này được gọi là rét Nàng Bân, gắn liền với sự tích nàng Bân may áo cho chồng.' },
                    { id: 'xh_new_13', question: 'Ai là người được tặng Huân chương Sao Vàng đầu tiên ở nước ta?', options: ['A. Hồ Chí Minh', 'B. Võ Nguyên Giáp', 'C. Trường Chinh', 'D. Tôn Đức Thắng'], answer: 'D', solution: 'Chủ tịch Tôn Đức Thắng là người đầu tiên được trao tặng Huân chương Sao Vàng vào năm 1958.' },
                    { id: 'xh_new_15', question: 'Loại hình sân khấu cải lương có nguồn gốc ở miền nào của Việt Nam?', options: ['A. Miền Bắc', 'B. Miền Trung', 'C. Nam Bộ', 'D. Tây Nguyên'], answer: 'C', solution: 'Cải lương là một loại hình nghệ thuật sân khấu truyền thống ra đời ở Nam Bộ vào đầu thế kỷ 20.' },
                    { id: 'xh_new_16', question: 'Hang Sơn Đoòng, hang động tự nhiên lớn nhất thế giới, nằm ở tỉnh nào của Việt Nam?', options: ['A. Quảng Ninh', 'B. Quảng Bình', 'C. Ninh Bình', 'D. Hà Giang'], answer: 'B', solution: 'Hang Sơn Đoòng thuộc Vườn quốc gia Phong Nha - Kẻ Bàng, tỉnh Quảng Bình.'},
                    { id: 'xh_new_17', question: 'ASEAN là tên viết tắt của tổ chức nào?', options: ['A. Diễn đàn Hợp tác Kinh tế châu Á - Thái Bình Dương', 'B. Hiệp hội các quốc gia Đông Nam Á', 'C. Tổ chức Thương mại Thế giới', 'D. Liên minh châu Âu'], answer: 'B', solution: 'ASEAN là viết tắt của Association of Southeast Asian Nations (Hiệp hội các quốc gia Đông Nam Á).'},
                    { id: 'xh_new_18', question: 'Ngọn núi nào được mệnh danh là "nóc nhà của Đông Dương"?', options: ['A. Pu Si Lung', 'B. Fansipan', 'C. Putaleng', 'D. Bạch Mộc Lương Tử'], answer: 'B', solution: 'Với độ cao 3.143 m, Fansipan là ngọn núi cao nhất Việt Nam và cả bán đảo Đông Dương.'}
                ]
            },
            "formulas": {
                name: "Công thức", 
                formulas: `
                     <h3 class="text-xl font-semibold mb-3">Toán học: Nguyên hàm & Tích phân</h3>
                    <h4 class="text-lg font-semibold mb-2">Bảng nguyên hàm cơ bản</h4>
                    <ul class="list-disc list-inside space-y-2">
                        <li>$\\int k dx = kx + C$</li>
                        <li>$\\int x^{n} dx = \\frac{x^{n+1}}{n+1} + C$ (n $\\neq$ -1)</li>
                        <li>$\\int \\frac{1}{x} dx = \\ln|x| + C$</li>
                        <li>$\\int e^{x} dx = e^{x} + C$</li>
                        <li>$\\int a^{x} dx = \\frac{a^{x}}{\\ln(a)} + C$</li>
                        <li>$\\int \\cos(x) dx = \\sin(x) + C$</li>
                        <li>$\\int \\sin(x) dx = -\\cos(x) + C$</li>
                    </ul>
                    <h3 class="text-xl font-semibold mt-6 mb-3">Toán học: Hình học Oxyz</h3>
                     <h4 class="text-lg font-semibold mb-2">Phương trình mặt phẳng</h4>
                    <p>Mặt phẳng $(P)$ đi qua $M(x_0; y_0; z_0)$ và có VTPT $\\vec{n}=(A;B;C):$</p>
                    <p class="font-mono bg-gray-100 p-2 rounded">$A(x-x_0) + B(y-y_0) + C(z-z_0) = 0$</p>
                    <h4 class="text-lg font-semibold mt-4 mb-2">Phương trình mặt cầu</h4>
                    <p>Mặt cầu $(S)$ tâm $I(a; b; c)$ và bán kính $R:$</p>
                     <p class="font-mono bg-gray-100 p-2 rounded">$(x-a)^2 + (y-b)^2 + (z-c)^2 = R^2$</p>
                    <div class="mt-8 border-t pt-6"></div>
                    <h3 class="text-xl font-semibold mb-3">Vật lý: Dao động điều hòa</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>Phương trình dao động: $x = A \\cos(\\omega t + \\phi)$</li>
                        <li>Hệ thức độc lập: $A^2 = x^2 + \\frac{v^2}{\\omega^2}$</li>
                        <li>Cơ năng: $W = \\frac{1}{2}kA^2 = const$</li>
                    </ul>
                    <h3 class="text-xl font-semibold mt-6 mb-3">Vật lý: Sóng cơ & Sóng ánh sáng</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>Bước sóng: $\\lambda = vT = \\frac{v}{f}$</li>
                         <li>Giao thoa sóng (vân sáng): $x_s = k \\frac{\\lambda D}{a}$</li>
                         <li>Giao thoa sóng (vân tối): $x_t = (k + \\frac{1}{2}) \\frac{\\lambda D}{a}$</li>
                    </ul>
                `
            }
        };

        let currentSubject = null;
        let currentSubtopic = null;
        let currentLevel = 'all';
        let userAnswers = {};
        let progressChart;

        document.addEventListener('DOMContentLoaded', () => {
            initNav();
            initLevelFilters();
            initChart();
            document.getElementById('reset-btn').addEventListener('click', resetQuiz);
        });

        function initNav() {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const subjectId = e.currentTarget.id.replace('nav-', '');
                    setActiveSubject(subjectId);
                });
            });
        }

        function initSubNav(subjectId) {
            document.querySelectorAll('[id^="sub-nav-"]').forEach(div => {
                div.innerHTML = '';
                div.classList.add('hidden');
            });
            
            const subNavContainer = document.getElementById(`sub-nav-${subjectId}`);
            if (subNavContainer && quizData[subjectId].subtopics) {
                for (const subtopicId in quizData[subjectId].subtopics) {
                    const subtopicName = quizData[subjectId].subtopics[subtopicId];
                    const link = document.createElement('a');
                    link.href = '#';
                    link.id = `sub-nav-${subjectId}-${subtopicId}`;
                    link.className = 'sub-nav-link block px-4 py-2 text-sm rounded-lg text-gray-600 hover:bg-gray-100';
                    link.textContent = subtopicName;
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        setActiveSubtopic(subjectId, subtopicId);
                    });
                    subNavContainer.appendChild(link);
                }
                subNavContainer.classList.remove('hidden');
            }
        }
        
        function initLevelFilters() {
            const filterButtons = document.querySelectorAll('.level-filter-btn');
            filterButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    currentLevel = btn.dataset.level;
                    filterButtons.forEach(b => {
                        b.classList.remove('bg-indigo-100', 'text-indigo-700');
                        b.classList.add('bg-gray-200', 'text-gray-600');
                    });
                    btn.classList.add('bg-indigo-100', 'text-indigo-700');
                    btn.classList.remove('bg-gray-200', 'text-gray-600');
                    if(currentSubject && currentSubject !== 'formulas') {
                         renderQuestions();
                    }
                });
            });
        }

        function setActiveSubject(subjectId) {
            currentSubject = subjectId;
            currentSubtopic = null; 
            userAnswers = {};
            currentLevel = 'all'; 

            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            document.getElementById('nav-' + subjectId).classList.add('active');
            
            initSubNav(subjectId); 

            document.getElementById('welcome-view').classList.add('hidden');
            document.getElementById('filter-section').classList.add('hidden');

            if (subjectId === 'formulas') {
                document.getElementById('quiz-view').classList.add('hidden');
                document.getElementById('formulas-view').classList.remove('hidden');
                renderFormulas();
            } else {
                document.getElementById('formulas-view').classList.add('hidden');
                document.getElementById('quiz-view').classList.remove('hidden');
                document.getElementById('topic-title').textContent = quizData[subjectId].name;

                if (subjectId === 'toan' || subjectId === 'ly') {
                    document.getElementById('filter-section').classList.remove('hidden');
                }

                if (quizData[subjectId].subtopics) {
                    document.getElementById('question-list').innerHTML = `<p class="text-gray-500 text-center col-span-full">Vui lòng chọn một chủ đề con để bắt đầu.</p>`;
                    updateSummary(true);
                } else {
                    document.getElementById(`sub-nav-${subjectId}`)?.classList.add('hidden');
                    resetLevelFilters();
                    renderQuestions();
                }
            }
        }

        function setActiveSubtopic(subjectId, subtopicId) {
            currentSubtopic = subtopicId;
            userAnswers = {};
            currentLevel = 'all'; 

            document.querySelectorAll('.sub-nav-link').forEach(link => link.classList.remove('active'));
            document.getElementById(`sub-nav-${subjectId}-${subtopicId}`).classList.add('active');
            
            if (subjectId === 'toan' || subjectId === 'ly') {
                document.getElementById('filter-section').classList.remove('hidden');
            } else {
                document.getElementById('filter-section').classList.add('hidden');
            }

            resetLevelFilters();
            document.getElementById('topic-title').textContent = `${quizData[subjectId].subtopics[subtopicId]}`;
            renderQuestions();
        }

        function resetLevelFilters() {
            document.querySelectorAll('.level-filter-btn').forEach(btn => {
                btn.classList.remove('bg-indigo-100', 'text-indigo-700');
                btn.classList.add('bg-gray-200', 'text-gray-600');
                if (btn.dataset.level === 'all') {
                    btn.classList.add('bg-indigo-100', 'text-indigo-700');
                    btn.classList.remove('bg-gray-200', 'text-gray-600');
                }
            });
        }

        function renderFormulas() {
            const contentDiv = document.getElementById('formulas-content');
            contentDiv.innerHTML = quizData['formulas'].formulas;
            if (window.MathJax) {
                window.MathJax.typesetPromise([contentDiv]).catch((err) => console.error("MathJax typesetting failed", err));
            }
        }

        function renderQuestions() {
            const questionList = document.getElementById('question-list');
            questionList.innerHTML = '';
            
            let questionsSource = [];
            if (currentSubtopic) {
                questionsSource = quizData[currentSubject].questions[currentSubtopic];
            } else if (currentSubject && quizData[currentSubject].questions && !quizData[currentSubject].subtopics) {
                questionsSource = quizData[currentSubject].questions;
            } else {
                questionList.innerHTML = `<p class="text-gray-500 text-center col-span-full">Vui lòng chọn một chủ đề để bắt đầu.</p>`;
                updateSummary(true);
                return;
            }

            const questionsToRender = questionsSource.filter(q => {
                if (q.level !== undefined) {
                    return currentLevel === 'all' || q.level == currentLevel;
                }
                return true; 
            });

            if (questionsToRender.length === 0) {
                 questionList.innerHTML = `<p class="text-gray-500 text-center col-span-full">Không có câu hỏi nào cho mức độ này.</p>`;
            }

            questionsToRender.forEach((q, index) => {
                const questionCard = document.createElement('div');
                questionCard.className = 'bg-white p-6 rounded-xl shadow-md';
                questionCard.innerHTML = `
                    <div class="flex justify-between items-start mb-4">
                        <p class="font-semibold text-gray-700"><span class="text-indigo-600 font-bold">Câu ${index + 1}:</span> ${q.question}</p>
                        ${q.level ? `<span class="text-xs font-bold uppercase px-2 py-1 rounded-full ${q.level === 1 ? 'bg-blue-100 text-blue-800' : q.level === 2 ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'}">Mức ${q.level}</span>` : ''}
                    </div>
                    <div id="options-${q.id}" class="space-y-3">
                        ${q.options.map((opt, i) => {
                             const optionLetter = String.fromCharCode(65 + i);
                             const optionText = opt.startsWith(optionLetter + '.') ? opt.substring(2).trim() : opt;
                             return `<button data-question-id="${q.id}" data-option="${optionLetter}" class="option-btn w-full text-left p-3 rounded-lg bg-gray-50 hover:bg-gray-100">
                                        <span class="font-bold mr-2">${optionLetter}.</span>
                                        <span>${optionText}</span>
                                     </button>`
                         }).join('')}
                    </div>
                    <div id="solution-${q.id}" class="solution-box mt-4 p-4 rounded-lg bg-indigo-50 text-indigo-800 border border-indigo-200 hidden">
                        <p class="font-semibold">Giải thích:</p>
                        <p>${q.solution || 'Chưa có lời giải thích.'}</p>
                    </div>
                `;
                questionList.appendChild(questionCard);
            });
            
            addOptionEventListeners();
            updateSummary();
            if (window.MathJax) {
                window.MathJax.typesetPromise([questionList]).catch((err) => console.error("MathJax typesetting failed", err));
            }
        }
        
        function addOptionEventListeners() {
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    handleOptionSelect(btn.dataset.questionId, btn.dataset.option);
                });
            });
        }

        function handleOptionSelect(questionId, selectedOption) {
            if (userAnswers[questionId]) return; 

            userAnswers[questionId] = selectedOption;
            
            let questionData;
            if (currentSubtopic) {
                questionData = quizData[currentSubject].questions[currentSubtopic].find(q => q.id === questionId);
            } else {
                questionData = quizData[currentSubject].questions.find(q => q.id === questionId);
            }

            const optionsContainer = document.getElementById(`options-${questionId}`);
            const allOptions = optionsContainer.querySelectorAll('.option-btn');
            const selectedElement = optionsContainer.querySelector(`[data-option="${selectedOption}"]`);
            const solutionBox = document.getElementById(`solution-${questionId}`);

            const isCorrect = selectedOption === questionData.answer;

            allOptions.forEach(opt => {
                opt.disabled = true;
                opt.classList.remove('hover:bg-gray-100');
                const optionLetter = opt.dataset.option;
                if (optionLetter === questionData.answer) {
                    opt.classList.add('correct');
                }
            });

            if (!isCorrect) {
                selectedElement.classList.add('incorrect');
            }
            solutionBox.classList.remove('hidden');
            
            updateSummary();
        }
        
        function updateSummary(clear = false) {
            if (clear || !currentSubject) {
                document.getElementById('correct-count').textContent = 0;
                document.getElementById('total-answered').textContent = 0;
                updateChart(0, 0, 1);
                return;
            }

            let questions = [];
            if (currentSubtopic) {
                questions = quizData[currentSubject].questions[currentSubtopic];
            } else if (currentSubject && quizData[currentSubject].questions && !quizData[currentSubject].subtopics) {
                questions = quizData[currentSubject].questions;
            } else {
                 document.getElementById('correct-count').textContent = 0;
                document.getElementById('total-answered').textContent = 0;
                updateChart(0, 0, 1);
                return;
            }
            
            const filteredQuestions = questions.filter(q => currentLevel === 'all' || !q.level || q.level == currentLevel);
            if (!filteredQuestions.length) {
                document.getElementById('correct-count').textContent = 0;
                document.getElementById('total-answered').textContent = 0;
                updateChart(0, 0, 0); // No questions, so all zero
                return;
            }

            const totalAnswered = Object.keys(userAnswers).filter(id => filteredQuestions.some(q => q.id === id)).length;
            let correctCount = 0;
            for (const qId in userAnswers) {
                const question = filteredQuestions.find(q => q.id === qId);
                if (question && userAnswers[qId] === question.answer) {
                    correctCount++;
                }
            }
            
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('total-answered').textContent = totalAnswered;

            const incorrectCount = totalAnswered - correctCount;
            const unansweredCount = filteredQuestions.length - totalAnswered;
            updateChart(correctCount, incorrectCount, unansweredCount);
        }
        
        function resetQuiz() {
            userAnswers = {};
            if(currentSubject && currentSubject !== 'formulas') {
                renderQuestions(); 
            }
        }

        function initChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            progressChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Đúng', 'Sai', 'Chưa trả lời'],
                    datasets: [{
                        data: [0, 0, 1], // Start with 100% unanswered
                        backgroundColor: [
                            '#22c55e', // green-500
                            '#ef4444', // red-500
                            '#e5e7eb'  // gray-200
                        ],
                        borderColor: '#f8f9fa',
                        borderWidth: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                boxWidth: 12,
                                font: { size: 14 }
                            }
                        },
                        tooltip: { enabled: true }
                    }
                }
            });
        }

        function updateChart(correct, incorrect, unanswered) {
            progressChart.data.datasets[0].data = [correct, incorrect, unanswered];
            if (correct === 0 && incorrect === 0 && unanswered === 0) {
                progressChart.data.datasets[0].data = [0, 0, 1];
            }
            progressChart.update();
        }
    </script>
</body>
</html>
